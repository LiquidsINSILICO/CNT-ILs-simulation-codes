Main console display active (Tcl8.5.6 / Tk8.5.6)
(new-system) 3 % set sel [atomselect top "resid 2 and z > 63"]
atomselect0
>Main< (new-system) 4 % $sel get index
516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 942 943 944 945 946 947 948 949 950 951 952 953 954 955 956 957 958 959 960 961 962 963 964 965 966 967 968 969 970 971 972 973 974 975 976 977 978 979 980 981 982 983 984 985 986 987 988 989 990 991 992 993 994 995 996 997 998 999 1000 1001 1002 1003 1004 1005 1006 1007 1008 1009 1021 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031
>Main< (new-system) 5 % set sel_within [atomselect top "(resname BPY or resname bf4) and within 5 of $sel"]
atomselect: cannot parse selection text: (resname BPY or resname bf4) and within 5 of atomselect0
>Main< (new-system) 6 % set sel_idx [$sel get index]
516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 942 943 944 945 946 947 948 949 950 951 952 953 954 955 956 957 958 959 960 961 962 963 964 965 966 967 968 969 970 971 972 973 974 975 976 977 978 979 980 981 982 983 984 985 986 987 988 989 990 991 992 993 994 995 996 997 998 999 1000 1001 1002 1003 1004 1005 1006 1007 1008 1009 1021 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031
>Main< (new-system) 7 % set sel_within [atomselect top "(resname BPY or resname bf4) and within 5 of index $sel_idx"]
atomselect1
>Main< (new-system) 8 % set within_idx [$sel_within get index]
1868 1869 1870 1871 2208 2215 2219 2220 2221 2222 2223 2224 2225 2226 2227 2228 2229 2230 2231 3576 3577 3581 3583 3587 3588 3589 3590 3591 3593 3594 3596 3599 6672 6673 6674 6675 6676 6677 6678 6679 6680 6681 6682 6683 6684 6685 6686 6687 6688 6689 6690 6691 7726 16129 16130 16131 16134 16136 16137 26760 26761 26762 26763 26764 26765 26766 26767 26768 26769 26774 26776 26777 26778 26779 26780 26781 26782 26783 28611 28612 28613 28617 28618 28619 28620 28622 28623 28624 28625 28626 28627 28628 28629 28630 28631 33622 36312 36313 36314 36315 36316 36317 36318 36319 36320 36321 36322 36323 36324 36325 36326 36327 36328 36329 36330 36331 36332 36333 36334 36335 41400 41405 41407 41411 41412 41413 41414 41415 41416 41417 41419 41420 41421 41422 41423 42487 42494 42495 42496 42497 42498 42499 42500 42501 42502 42503 42679 42680 42693 46488 46489 46490 46491 46492 46493 46494 46495 46496 46497 46498 46499 46502 46503 46504 46505 46506 46507 46508 46509 46511 48888 48889 48890 48891 48892 48893 48894 48895 48897 48898 48899 48900 48901 51600 51601 51602 51603 51604 51605 51606 51607 51608 51609 51610 51611 51612 51614 51615 51616 51617 51618 51619 51620 51621 51943 51947 51948 51950 51951 51952 51953 51954 53937 53938 53939 53940 53941 53973 53974 55854 55951 56764 56766 56782 56783 56784 56785 56786 57792 57793 57794 57796 57849 58012 58013 58014 58015 58016 58072 58073 58074 58075 58076 60377 60378 60379 60381 62037 62038 62039 62040 62445
>Main< (new-system) 9 % set unique_resids [lsort -unique $sel_within]
atomselect1
>Main< (new-system) 10 % set resids [$sel_within get resids]
cannot find attribute 'resids': in atomsel: get:
>Main< (new-system) 11 % set resids [$sel_within get resid]
37 37 37 37 52 52 52 52 52 52 52 52 52 52 52 52 52 52 52 109 109 109 109 109 109 109 109 109 109 109 109 109 238 238 238 238 238 238 238 238 238 238 238 238 238 238 238 238 238 238 238 238 281 632 632 632 632 632 632 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1075 1152 1152 1152 1152 1152 1152 1152 1152 1152 1152 1152 1152 1152 1152 1152 1152 1152 1360 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1473 1685 1685 1685 1685 1685 1685 1685 1685 1685 1685 1685 1685 1685 1685 1685 1730 1730 1730 1730 1730 1730 1730 1730 1730 1730 1730 1738 1738 1738 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1897 1997 1997 1997 1997 1997 1997 1997 1997 1997 1997 1997 1997 1997 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2110 2124 2124 2124 2124 2124 2124 2124 2124 2414 2414 2414 2414 2414 2421 2421 2797 2816 2979 2979 2983 2983 2983 2983 2983 3185 3185 3185 3185 3196 3229 3229 3229 3229 3229 3241 3241 3241 3241 3241 3702 3702 3702 3702 4034 4034 4034 4034 4115
>Main< (new-system) 12 % set uniq_resids [lsort -unique -integer $resids]
37 52 109 238 281 632 1075 1152 1360 1473 1685 1730 1738 1897 1997 2110 2124 2414 2421 2797 2816 2979 2983 3185 3196 3229 3241 3702 4034 4115
>Main< (new-system) 13 % set uniq_resids [lsort -unique $resids]
1075 109 1152 1360 1473 1685 1730 1738 1897 1997 2110 2124 238 2414 2421 2797 281 2816 2979 2983 3185 3196 3229 3241 37 3702 4034 4115 52 632
>Main< (new-system) 14 % set uniq_resids [lsort -unique -integer $resids]
37 52 109 238 281 632 1075 1152 1360 1473 1685 1730 1738 1897 1997 2110 2124 2414 2421 2797 2816 2979 2983 3185 3196 3229 3241 3702 4034 4115
>Main< (new-system) 15 % set sel_combined [atomselect top "(index $sel_idx) or resid $uniq_resids"]
atomselect2
>Main< (new-system) 16 % puts "Total atoms selected: [$sel_combined num]"
Total atoms selected: 569
>Main< (new-system) 17 % puts "Indices: [$sel_combined get index]"
Indices: 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 942 943 944 945 946 947 948 949 950 951 952 953 954 955 956 957 958 959 960 961 962 963 964 965 966 967 968 969 970 971 972 973 974 975 976 977 978 979 980 981 982 983 984 985 986 987 988 989 990 991 992 993 994 995 996 997 998 999 1000 1001 1002 1003 1004 1005 1006 1007 1008 1009 1021 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031 1848 1849 1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1865 1866 1867 1868 1869 1870 1871 2208 2209 2210 2211 2212 2213 2214 2215 2216 2217 2218 2219 2220 2221 2222 2223 2224 2225 2226 2227 2228 2229 2230 2231 3576 3577 3578 3579 3580 3581 3582 3583 3584 3585 3586 3587 3588 3589 3590 3591 3592 3593 3594 3595 3596 3597 3598 3599 6672 6673 6674 6675 6676 6677 6678 6679 6680 6681 6682 6683 6684 6685 6686 6687 6688 6689 6690 6691 6692 6693 6694 6695 7704 7705 7706 7707 7708 7709 7710 7711 7712 7713 7714 7715 7716 7717 7718 7719 7720 7721 7722 7723 7724 7725 7726 7727 16128 16129 16130 16131 16132 16133 16134 16135 16136 16137 16138 16139 16140 16141 16142 16143 16144 16145 16146 16147 16148 16149 16150 16151 26760 26761 26762 26763 26764 26765 26766 26767 26768 26769 26770 26771 26772 26773 26774 26775 26776 26777 26778 26779 26780 26781 26782 26783 28608 28609 28610 28611 28612 28613 28614 28615 28616 28617 28618 28619 28620 28621 28622 28623 28624 28625 28626 28627 28628 28629 28630 28631 33600 33601 33602 33603 33604 33605 33606 33607 33608 33609 33610 33611 33612 33613 33614 33615 33616 33617 33618 33619 33620 33621 33622 33623 36312 36313 36314 36315 36316 36317 36318 36319 36320 36321 36322 36323 36324 36325 36326 36327 36328 36329 36330 36331 36332 36333 36334 36335 41400 41401 41402 41403 41404 41405 41406 41407 41408 41409 41410 41411 41412 41413 41414 41415 41416 41417 41418 41419 41420 41421 41422 41423 42480 42481 42482 42483 42484 42485 42486 42487 42488 42489 42490 42491 42492 42493 42494 42495 42496 42497 42498 42499 42500 42501 42502 42503 42672 42673 42674 42675 42676 42677 42678 42679 42680 42681 42682 42683 42684 42685 42686 42687 42688 42689 42690 42691 42692 42693 42694 42695 46488 46489 46490 46491 46492 46493 46494 46495 46496 46497 46498 46499 46500 46501 46502 46503 46504 46505 46506 46507 46508 46509 46510 46511 48888 48889 48890 48891 48892 48893 48894 48895 48896 48897 48898 48899 48900 48901 48902 48903 48904 48905 48906 48907 48908 48909 48910 48911 51600 51601 51602 51603 51604 51605 51606 51607 51608 51609 51610 51611 51612 51613 51614 51615 51616 51617 51618 51619 51620 51621 51622 51623 51936 51937 51938 51939 51940 51941 51942 51943 51944 51945 51946 51947 51948 51949 51950 51951 51952 51953 51954 51955 51956 51957 51958 51959 53937 53938 53939 53940 53941 53972 53973 53974 53975 53976 55852 55853 55854 55855 55856 55947 55948 55949 55950 55951 56762 56763 56764 56765 56766 56782 56783 56784 56785 56786 57792 57793 57794 57795 57796 57847 57848 57849 57850 57851 58012 58013 58014 58015 58016 58072 58073 58074 58075 58076 60377 60378 60379 60380 60381 62037 62038 62039 62040 62041 62442 62443 62444 62445 62446
>Main< (new-system) 18 % $sel_combined writepdb combined_selection.pdb
>Main< (new-system) 19 % 
